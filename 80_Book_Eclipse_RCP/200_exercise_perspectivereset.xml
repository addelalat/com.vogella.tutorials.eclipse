[[exercise_prespectiveresetter]]
== Optional exercise: Saving and restoring a perspective

=== Target of this exercise
		
			In this exercise you learn how to save a certain state of an perspective and restore this state afterwards.
		
	

=== Create application model elements
		
			We want to provide those actions in the main menu of the application.
			Therefore we define the necessary commands,
			handler, and menu
			contributions in the application model,
			as depicted in the following screenshot.
		
		
image::perpective_reset_applicationmodel.png[Application model requirements for resetting the perspective]
		
		
			Please also make sure to add some parts inside the perspective,
			which you can move around or close in order to
			modify the perspective
			layout,
			so that the previously saved perspective can be restored afterwards.
		
	

=== Dynamically creating and saving new perspectives
		
			The perspective save handler gets the currently active perspective from the EModelService
			and clones it in the window
			model
			element, which implements MSnippetContainer.
			As MApplication also implements the MSnippetContainer interface you
			also may
			save the snippet
			application wide,
			by passing the MApplication to the
			`cloneElement`
			method as second parameter.
		
		
[source,java]
----
include::res/perspectives/SavePerspectiveHandler.java[]
----
		
	

=== Implement restoring the state of a perspective
		
			Implement the following class as handler and create a new menu entry for it in your application model.
		
		
[source,java]
----
include::res/perspectives/RestorePerspectiveHandler.java[]
----
		
		Create a snippet in your application model for the default of a certain perspective. Use the same ID as the
			perspective you want to be able to reset.
		
		The RestorePerspectiveHandler can only be executed, if the current perspective is available as snippet (based on
			the identical ID).
			When
			restoring a perspective
			the current perspective is removed from the application model,
			the
			entries from the snippet are added to the perspective stack and the new perspective is activated.
		
	



=== Validating
		
			Start your application, invoke the save perspective handler
			and modify the perspective by moving parts around or
			closing parts.
		
		
			To make parts closable the close attribute of a part in the application model has to be checked.
		
	
