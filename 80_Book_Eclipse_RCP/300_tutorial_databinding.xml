<chapter id="tutorial_databinding">
	<title>Exercise: Data binding for SWT widgets</title>
	<section id="tutorial_databinding1">
		<title>Add new plug-in dependencies to the application plug-in</title>
		<para>
			In the
			<filename>MANIFEST.MF</filename>
			, add the following plug-ins as dependencies to your
			application
			plug-in.

			<itemizedlist>
				<listitem>
					<para>org.eclipse.core.databinding
					</para>
				</listitem>
				<listitem>
					<para>
						org.eclipse.core.databinding.beans
					</para>
				</listitem>
				<listitem>
					<para>
						org.eclipse.core.databinding.property
					</para>
				</listitem>
				<listitem>
					<para>org.eclipse.jface.databinding
					</para>
				</listitem>
			</itemizedlist>
		</para>
	</section>
	<section id="tutorial_databinding2">
		<title>Add the plug-in dependencies to the model plug-in</title>
		<para>
			Add
			<code>org.eclipse.core.databinding</code>
			as dependency to the
			<filename>MANIFEST.MF</filename>
			file of the
			<code>com.example.e4.rcp.todo.model</code>
			plug-in.
		</para>
	</section>
	<section id="tutorial__databinding2">
		<title>Update your Todo data model to be observable</title>

		<para>
			Add constants for the property name in your
			<code>Todo</code>
			class for them to use them later in data binding. The constants must reflect the bean property names in the
			class,
			otherwise, the data binding will not find the
			right property
			to bind to. Also, change your
			<code>Todo</code>
			class to use
			<code>WritableValue</code>
			for its members.
		</para>
		<para>
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="../examples/databinding/Todo.java" />
			</programlisting>
		</para>
	</section>


	<section id="tutorial_databinding3">
		<title>Remove the modification listeners in your code</title>
		<para>
			Delete your
			<code>addModifyListener()</code>
			methods in the
			<code>TodoDetailsPart</code>
			class. The synchronization between the
			<code>Todo</code>
			object and the user interface will be handled by the JFace Data
			Binding framework.
		</para>
		<warning>
			<para>
				Ensure to remove these listeners. Otherwise you will see "strange"
				side-effects like jumping cursors. Ensure that you
				removed it, via a text search for
				<code>ModifyListener</code>
				term in your
				<code>TodoDetailsPart</code>
				class.
			</para>
		</warning>

	</section>

	<section id="tutorial_databinding4b">
		<title>Implement data binding in TodoDetailsPart</title>

		<para>
			Change your implementation of the
			<code>TodoDetailsPart</code>
			class
			to use data binding based on the following example code.
		</para>

		<para>
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="../examples/databinding/Binding.java" />
			</programlisting>
		</para>

	</section>
	<section id="tutorial_databinding_validate">
		<title>Validating</title>
		<para>
			Use your wizard to create new
			<code>Todo</code>
			objects. The following screenshot shows the first page of the wizard.
		</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newtodo_wizard10.png" />
				</imageobject>
				<textobject>
					<phrase></phrase>
				</textobject>
			</mediaobject>
		</para>
		<para>
			Test if your implementation behaves correctly. Ensure that new Todo
			objects
			are
			shown in the
			table after pressing the
			<guilabel>Load data</guilabel>
			button.
		</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newtodo_wizard20.png" />
				</imageobject>
				<textobject>
					<phrase></phrase>
				</textobject>
			</mediaobject>
		</para>
		<note>
			<para>
				Your detail part
				is currently not supplied with a Todo, only
				the
				wizard can currently be used to test the
				databinding. This will be change
				in a later exercise.
			</para>
		</note>
	</section>
</chapter>
