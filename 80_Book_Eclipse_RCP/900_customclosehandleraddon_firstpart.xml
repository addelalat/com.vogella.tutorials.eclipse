<section id="exercise_modeladdonclose" role="wrapper">
	<title>Optional exercise: Changing the close behavior via an add-on
[[exercise_modeladdonclose1">
=== Target
		
			In this exercise you ensure that the user is prompted if he
			wants to leave the application with some unsaved
			changes. This should also work if he presses
			the close button
			of the application corner.
		
	

[[exercise_modeladdonclose_create">
=== Creating a plug-in
		
			Create a new simple plug-in called
			<code>com.vogella.e4.addon.exitconfirmation</code>
			.
		
		
			Add the following dependencies to your plug-in.
			<itemizedlist>
				<listitem>
					org.eclipse.core.runtime
					
				</listitem>
				<listitem>
					org.eclipse.e4.ui.di
				</listitem>
				<listitem>
					org.eclipse.e4.ui.model.workbench
				</listitem>
				<listitem>
					org.eclipse.e4.ui.workbench
				</listitem>
				<listitem>
					org.eclipse.e4.core.di
				</listitem>
				<listitem>
					org.eclipse.jface
				</listitem>
				<listitem>
					org.eclipse.e4.core.contexts
				</listitem>
				<listitem>
					org.eclipse.osgi.services
				</listitem>
			</itemizedlist>
		
	
[[exercise_modeladdonclose_createclass">
=== Creating the model add-on
		Define the following class which is used as model add-on 
		
			<programlisting language="java">
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
					href="./examples/modeladdon/WindowCloseListenerAddon.java" />
			</programlisting>
		

	

