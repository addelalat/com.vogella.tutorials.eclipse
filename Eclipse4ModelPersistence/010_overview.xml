
	<title>Own persistence for the application model

[[modelpersistence_applicatione4xmi">
=== Specifying the location of the application model file
		
			The file name and location of the application
			model can
			be specified in
			the
			<filename>plugin.xml</filename>
			file.
			This is
			done
			via the
			<code>applicationXMI</code>
			property. The
			path to
			the file follows the
			"bundleSymbolicName"/"filename"
			pattern, e.g.
			<filename>test/ApplicationDifferent.e4xmi</filename>
			.
		
		
			To do this open the
			<filename>plugin.xml</filename>
			file, select the
			_Extensions_
			tab and
			open the
			<code>org.eclipse.core.runtime.products</code>
			contribution.
		
		
			Right-click on the
			_product_
			entry and select
			menu:New [Property]
			. Use
			<parameter>applicationXMI</parameter>
			as parameter name and
			<parameter>com.example.e4.rcp.todo/ApplicationNew.e4xmi</parameter>
			as value. This value
			consists of the
			<code>BundleSymbolicName</code>
			of the corresponding plug-in and the file
			name of
			your
			application model file.
		
		
image::tutorial_product70.png[,pdfwidth=60%]
		
	
[[modelpersistence_resourcehandler">
=== Custom application model persistence handler
		<indexterm>
			<primary>Application model</primary>
			<secondary>Custom persistence handler</secondary>
		</indexterm>
		
			Eclipse uses an instance of the
			<code>IModelResourceHandler</code>
			interface to load and save the application model at startup and
			shutdown. The
			default implementation of this interface
			is provided by
			the
			<code>ResourceHandler</code>
			class from the
			<code>org.eclipse.e4.ui.internal.workbench</code>
			package.
		
		
			You can specify the
			<parameter>modelResourceHandler</parameter>
			as parameter on your product extension to point to another class via
			the
			<code>bundleclass://</code>
			notation.
		
		
image::modelresourcehandler.png[,pdfwidth=60%]
		

		This allows you to construct the initial application model from
			any source you desire. For example, you could use
			property files or
			construct the application model based on information from a database.
		

		
			Implementing this interface requires knowledge about the Eclipse
			Modeling Framework (EMF). You can use the
			<code>ResourceHandler</code>
			as a template to see how the
			<code>IModelResourceHandler</code>
			interface could be implemented.
		
	
