<section id="_reset_branch_to_a_previous_state">
	<title>Reset branch to a previous state
	<simpara>Accidentally committing changes in a wrong branch can happen.
		For
		example you may switch between several branches, forget to checkout
		the branch in which you plan to continue your work and then commit in
		a wrong branch. Resetting the wrongly updated branch to its previous
		state is the topic of this exercise.
	</simpara>
	<simpara>
		Suppose you want to fix the warning for the unused
		<emphasis>serialVersionUID</emphasis>
		field in the SWT
		<emphasis>CalculatorUI</emphasis>
		class
		(
		<emphasis>org.eclipse.example.calc.internal.ui.swt.CalculatorUI
		</emphasis>
		). You create
		a new local branch for this purpose
		<emphasis>fixWarnings</emphasis>
		. However, let’s
		pretend that you forgot to checkout the
		<emphasis>fixWarnings</emphasis>
		branch.
		Instead you are on the
		<emphasis>addDivideOperation</emphasis>
		.
	</simpara>
	<itemizedlist>
		<listitem>
			<simpara>
				Checkout the
				<emphasis>addDivideOperation</emphasis>
				branch
			</simpara>
		</listitem>
		<listitem>
			<simpara>
				Create a new branch called
				<emphasis>fixWarnings</emphasis>
				based on the
				<emphasis>origin/master</emphasis>
				branch but make sure the
				<emphasis>checkout new branch</emphasis>
				checkbox is deselected. The new branch gets created but the
				<emphasis>addDivideOperation</emphasis>
				branch is still checked out.
			</simpara>
			<simpara>
				<inlinemediaobject>
					<imageobject>
						<imagedata fileref="./images/create-branch-3.png" scale="40"/>
					</imageobject>
					<textobject>
						<phrase>Create Branch</phrase>
					</textobject>
				</inlinemediaobject>
			</simpara>
		</listitem>
		<listitem>
			<simpara>
				Remove the field
				<emphasis>serialVersionUID</emphasis>
				from
				<emphasis>org.eclipse.example.calc.internal.ui.swt.CalculatorUI
				</emphasis>
				. Commit the
				changes. This updated the
				<emphasis>addDivideOperation</emphasis>
				branch.
			</simpara>
		</listitem>
		<listitem>
			<simpara>
				Realize that you committed changes in a wrong branch. Don’t panic.
			</simpara>
		</listitem>
		<listitem>
			<simpara>
				Reset the
				<emphasis>addDivideOperation</emphasis>
				branch back to its previous state but
				keep the changes in the working tree:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Using the History View find the parent commit of the tip of the
						<emphasis>addDivideOperation</emphasis>
						branch and select
						<emphasis>Reset &gt; Mixed</emphasis>
						from the
						context menu:
					</simpara>
					<simpara>
						<inlinemediaobject>
							<imageobject>
								<imagedata fileref="./images/history-view-7.png" scale="40"/>
							</imageobject>
							<textobject>
								<phrase>History View</phrase>
							</textobject>
						</inlinemediaobject>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The
						<emphasis>addDivideOperation</emphasis>
						branch is reset back to its previous state
						and doesn’t contain the commit that fixed the warning anymore.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						However, the fix for the warning is still in the working tree!
					</simpara>
				</listitem>
			</itemizedlist>
		</listitem>
		<listitem>
			<simpara>
				Checkout the correct branch, the
				<emphasis>fixWarnings</emphasis>
				branch
			</simpara>
		</listitem>
		<listitem>
			<simpara>
				The changes are still in the working tree. Commit the changes.
			</simpara>
		</listitem>
	</itemizedlist>
	<simpara>
		<emphasis>Q:</emphasis>
		What if you realized that you are on a wrong branch before
		committing the changes in the wrong branch?
	</simpara>
</section>
