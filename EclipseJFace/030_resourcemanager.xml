<section id="jface_localresoucemanager">
	<title>JFace resource manager for Colors, Fonts and Images</title>
	<indexterm>
		<primary>Resource manager (JFace)</primary>
	</indexterm>
	<indexterm>
		<primary>JFace</primary>
		<secondary>Resource manager</secondary>
	</indexterm>
	<para>
		SWT
		is based on the native widgets of the OS. Whenever an
		SWT
		widget is allocated, a corresponding OS specific
		widget is
		created.
		The Java garbage collector cannot automatically clean-up these
		OS-specific widget references.
	</para>
	<para>
		Fortunately all widgets which are created based on a parent widget are
		automatically disposed when the parent
		<code>Composite</code>
		is disposed.
		If you develop Eclipse plug-ins, the
		<code>Composite</code>
		of a
		part
		is automatically disposed once the part is closed.
		Therefore,
		these
		SWT
		widgets are
		handled automatically in
		Eclipse plug-in projects.
	</para>
	<para>
		This rule does not apply for colors, fonts, images and curcors, as these
		may be
		reused in other places. For this reason
		they need to be
		explicitly
		disposed. Fortunately
		JFace
		provides the
		<code>ResourceManager</code>
		and its derived classes.
	</para>

	<para>
		An instance of the
		<code>LocalResourceManager</code>
		class
		is created with a reference to a
		<code>Control</code>
		. If this
		<code>Control</code>
		is disposed, the resources created by the
		<code>LocalResourceManager</code>
		are also disposed.
	</para>

	<para>
		<programlisting language="java">
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
				href="./examples/resource/LocalResourceMananger.txt" />
		</programlisting>
	</para>
	<para>
		The
		<code>createImage()</code>
		method expects an
		<code>ImageDescriptor</code>
		class.

		To get one
		<code>ImageDescriptor</code>
		from an image file stored in your current plug-in use
		the following:
	</para>
	<para>
		<programlisting>
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/resource/loadimage.txt" />
		</programlisting>
	</para>

	<para>
		In case you do not have a Control for the
		<code>ResourceManager</code>
		, the
		<code>LocalResourceManager</code>
		also provides another constructor.
	</para>
	<para>
		A popular example is a
		<code>LabelProvider</code>
		, where you wouldn't want to pass a
		<code>Control</code>
		to it in order to properly dispose system resources afterwards:
	</para>
	<para>
		<programlisting language="java">
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
				href="./examples/resource/LocalResourceManangerSelfdispose.java" />
		</programlisting>
	</para>
	<para>
		<warning>
			<para>
				In case you do not pass a Control, to the
				<code>LocalResourceManager</code>
				you
				have to dispose the
				<code>ResourceManager</code>
				yourself.
			</para>
		</warning>
	</para>
	<para>
		In general you should always use a JFace ResouceManager in order
		to avoid
		problems with system resources or even
		a
		"No more handles"
		SWTException.
	</para>
</section>
	
	
