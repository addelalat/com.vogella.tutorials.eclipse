<section id="exercise_preferencepage">
	<title>Exercise: Contribute a preference page to the Eclipse IDE</title>
	<note>
		<para>
			This exercise is specific to the Eclipse IDE and will not work for Eclipse 4 RCP applications. See
			<ulink url="https://github.com/opcoach/e4Preferences"> for an Eclipse 4 implementation.</ulink>
		</para>
	</note>
	<para>
		In the following exercise you create a plug-in with a preference
		pages
		which
		allows the user to maintain certain
		settings.
	</para>
	<para>
		Create a new simple plug-in project called
		<code>com.vogella.preferences.page</code>
		. No activator is needed and you do not have to use a template.

	</para>
	<para>
		Open the
		<filename>MANIFEST.MF</filename>
		editor and click on the
		<guilabel>Extensions</guilabel>
		link on the
		<guilabel>Overview</guilabel>
		tab.
		On this tab, add the extension
		<code>org.eclipse.ui.preferencePages</code>
		with the following settings.
	</para>
	<para>
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/preferences10.gif" />
			</imageobject>
		</mediaobject>
	</para>
	<para>
		Enter the following code for your class
		<code>MyPreferencePage1</code>
		.
		Method
		<code>init()</code>
		sets
		the preferences store and the method
		<code>createFieldEditors()</code>
		registers pre-defined editors for
		values.
		<code>checkState()</code>
		allows to perform a validations. To get notified about
		value changes
		you need to override the propertyChange method.
	</para>

	<para>
		<programlisting>
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
				href="./examples/preferencepage/MyPreferencePage1.java" />
		</programlisting>
	</para>

	<para> Start a runtime Eclipse IDE with your plug-in and ensure that
		you see your preference page in the preference
		settings of the Eclipse
		IDE.

		Validate that maintained values are stored even if
		you restart
		your
		application.
	</para>
	<para>
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/preferences20.gif" />

			</imageobject>
		</mediaobject>
	</para>
	<para>
		Add a command
		<code>showPreferenceValues</code>
		with the following
		handler
		to the menu. This command demonstrates how to
		access preferences
		values from
		the
		<code>preferencePage</code>
		.
	</para>
	<para>
		<programlisting>
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
				href="./examples/preferencepage/ShowPreferenceValues.java" />
		</programlisting>
	</para>
	<para>
		To set the default values for preferences use the extension
		point
		<code>org.eclipse.core.runtime.preferences</code>
		. Create a new
		initializer with the following class
		<code>de.vogella.preferences.page.preferencepage.MyInitializer</code>
		.
	</para>
	<para>
		<programlisting>
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text"
				href="./examples/preferencepage/MyInitializer.java" />
		</programlisting>
	</para>
	<para>
		Finally create a new
		view
		to show one of
		the preference values. Also
		register
		a
		<code>PropertyChangeListener</code>
		to
		the preferences store to get informed in case the preference
		settings
		change.
	</para>
	<para>
		<programlisting>
			<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" parse="text" href="./examples/preferencepage/View.java" />
		</programlisting>
	</para>
</section>