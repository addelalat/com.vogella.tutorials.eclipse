<section id="OSGi_firstbundle">
	<title>Tutorial: Using the Activator and exporting your bundle</title>
	<para>
		In this exercise you create another bundle which uses an
		<code>Activator</code>
		. You also run it within Eclipse
		At the
		end of this chapter you will
		also export
		your bundle
		to use it
		later in a
		stand-alone OSGi server.
	</para>
	<section id="createbundle">
		<title>Create a new Bundle</title>
		<para>
			Create a new simple plug-in project
			"com.vogella.osgi.firstbundle.internal" via
			<menuchoice>
				<guimenu>File</guimenu>
				<guisubmenu>New</guisubmenu>
				<guisubmenu>Other...</guisubmenu>
				<guisubmenu>Plug-in Development</guisubmenu>
				<guisubmenu>Plug-in Project</guisubmenu>
			</menuchoice>
			.
		</para>
	</section>
	<section id="codebundle">
		<title>Coding</title>
		<para> Create the following thread class.</para>
		<para>
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/firstbundle/MyThread.java" />
			</programlisting>
		</para>
		<para> Change the class Activator.java to the following.</para>
		<para>
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="./examples/firstbundle/Activator.java" />
			</programlisting>
		</para>
	</section>
	<section id="runbundle">
		<title>Run</title>
		<para>
			Select your
			<filename>MANIFEST.MF</filename>
			file, right-click it and select
			<menuchoice>
				<guimenu>Run As</guimenu>
				<guisubmenu>Run
					Configuration
				</guisubmenu>
			</menuchoice>
			. Create an OSGi Framework launch configuration. deselect
			all bundles
			except your de.vogella.osgi.firstbundle. Afterwards press the
			<guilabel>Add
				Required
				bundles
			</guilabel>
			.
			This adds the
			<code>org.eclipse.osgi</code>
			bundle to your run configuration.
		</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/firstbundle30.gif" />

				</imageobject>
			</mediaobject>
		</para>
		<para> Run this configuration. Every 5 second a new
			message is
			written
			to the console.
		</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/firstbundle40.gif" />

				</imageobject>
			</mediaobject>
		</para>
		<para>
			<tip>
				In case you are wondering in which folder OSGi starts you find it
				in
				<![CDATA[ 
				${workspace_loc}/.metadata/plugins/org.eclipse.pde.core/
				<runconfig> ]]>.
				This folder list the installed bundles via the file "dev.properties"
				and set the Eclipse workspace as reference in the config.ini file
				via the osgi.bundles=reference\:file\ statement. This way you can
				update your bundles in the running OSGi environment directly without
				any deployment.
			</tip>
		</para>
	</section>
	<section id="exportbundle">
		<title>Export your bundle</title>
		<para>Export your bundle. This will allow you to install it into a
			OSGi runtime. Select your bundle and choose File -> Export -> Plug-in
			Development -> "Deployable plug-ins and fragment".
		</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/firstbundle50.gif" />

				</imageobject>
			</mediaobject>
		</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/firstbundle60.gif" />

				</imageobject>
			</mediaobject>
		</para>
		<para> Unflag the option to export the source.</para>
		<para>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/firstbundle65.gif" />

				</imageobject>
			</mediaobject>
		</para>
	</section>
</section>